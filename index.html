<!-- FULL UPDATED HTML WITH PUBLIC BLOCKED DATES -->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Afterlife Care Center LLC | Trade Embalming & Funeral Directing</title>
<meta name="description" content="Professional trade embalming and funeral directing for funeral homes in the St. Louis metro area." />
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#0b0b0c; --panel:#121214; --card:#141416;
    --ink:#f6f6f7; --muted:#c9cad0; --line:#2b2c31; --accent:#e5e5e5;
  }
  *{box-sizing:border-box} html{scroll-behavior:smooth}
  body{margin:0;background:var(--bg);color:var(--ink);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
  .container{max-width:1100px;margin:0 auto;padding:0 20px}
  header{position:sticky;top:0;background:var(--panel);border-bottom:1px solid var(--line);z-index:50}
  .nav{display:flex;align-items:center;justify-content:space-between;padding:14px 0}
  .brand{display:flex;gap:12px;align-items:center;color:var(--ink);text-decoration:none}
  .brand .name{font-family:'Playfair Display',serif;font-weight:700;letter-spacing:.3px}
  .tagline{color:var(--muted);font-size:15px}
  .nav a{color:var(--ink);text-decoration:none;margin-left:18px;font-weight:600}
  .nav a:hover{opacity:.9}
  .hero{position:relative;overflow:hidden;background:var(--bg)}
  .hero .floral{position:absolute;inset:0;pointer-events:none}
  .hero-inner{padding:84px 0 72px;position:relative}
  .kicker{color:var(--muted);letter-spacing:.12em;text-transform:uppercase;font-size:12px;font-weight:700}
  h1{font-family:'Playfair Display',serif;font-size:clamp(30px,4vw,48px);line-height:1.1;margin:8px 0 12px}
  p.lede{max-width:760px;color:#e3e3e6;margin:0 0 24px}
  .btn{display:inline-flex;align-items:center;justify-content:center;padding:12px 18px;border-radius:10px;border:1px solid var(--accent);color:#111;background:#fff;font-weight:700;text-decoration:none}
  .btn.alt{background:transparent;color:var(--ink);border-color:var(--ink)}
  section{padding:56px 0;background:var(--bg)}
  .card{background:var(--card);border:1px solid var(--line);border-radius:14px;padding:20px;box-shadow:0 1px 0 rgba(0,0,0,.08)}
  h2{font-family:'Playfair Display',serif;font-size:clamp(24px,3.2vw,34px);margin:0 0 12px}
  h3{font-family:'Playfair Display',serif;margin:0 0 8px}
  .grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:18px}
  .grid-2{display:grid;grid-template-columns:1fr 1fr;gap:24px}
  @media (max-width: 900px){.grid-3{grid-template-columns:1fr 1fr}.grid-2{grid-template-columns:1fr}}
  .rate-table{width:100%;border-collapse:collapse;border:1px solid var(--line);border-radius:12px;overflow:hidden;margin-top:8px}
  .rate-table th,.rate-table td{padding:12px 14px;border-bottom:1px solid var(--line);text-align:left}
  .rate-table thead{background:#0f0f11;color:var(--ink)}
  .note{color:var(--muted);font-size:14px}
  footer{border-top:1px solid var(--line);background:var(--panel);color:#bdbdc6;padding:28px 0}
  .chips{display:flex;gap:8px;flex-wrap:wrap}
  .chip{padding:6px 10px;border-radius:999px;border:1px solid var(--line);background:#16171a;color:var(--ink);font-size:13px}
  input, textarea, select {width:100%;margin:6px 0 14px;padding:12px 14px;border-radius:10px;border:1px solid var(--line);background:#121214;color:var(--ink)}
  input:focus, textarea:focus, select:focus {outline:3px solid #9ca3af;border-color:#9ca3af}
  button{cursor:pointer}
  .divider{height:1px;background:var(--line);margin:16px 0}
  .panel{background:var(--panel);border:1px solid var(--line);border-radius:14px;padding:20px}
</style>
</head>
<body>
  <!-- HEADER OMITTED FOR SPACE (same as yours) -->

<script>
(function(){
  const y = document.getElementById('year'); if (y) y.textContent = new Date().getFullYear();

  // Public blocked dates (hard-coded)
  const blockedDatesPublic = [
    "2025-08-28",
    "2025-08-29",
    "2025-08-30",
    "2025-08-31",
    "2025-09-01"
  ];

  // Store blocked dates locally (private tool)
  const blockedKey = 'afterlife_blocked_dates_v1';
  function loadBlocked(){ try{ return JSON.parse(localStorage.getItem(blockedKey))||[] }catch(e){ return [] } }
  function saveBlocked(list){ localStorage.setItem(blockedKey, JSON.stringify(list)); }

  // Show chips and mini calendar
  const chips = document.getElementById('blockedChips');
  function renderChips(){
    const list = loadBlocked();
    chips.innerHTML = '';
    if(!list.length) { const none = document.createElement('div'); none.className='note'; none.textContent='No blocked dates.'; chips.appendChild(none); return; }
    list.forEach(d=>{ const c=document.createElement('div'); c.className='chip'; c.textContent=d; c.title='Click to remove'; c.onclick=()=>{ saveBlocked(loadBlocked().filter(x=>x!==d)); renderAll(); }; chips.appendChild(c); });
  }

  function renderMiniCalendar() {
    const root = document.getElementById('miniCal'); if(!root) return;
    const now = new Date(); const year=now.getFullYear(); const month=now.getMonth();
    const first=new Date(year,month,1), last=new Date(year,month+1,0); const start=first.getDay(); const days=last.getDate();
    const blocked=loadBlocked();
    function iso(d){return `${year}-${String(month+1).padStart(2,'0')}-${String(d).padStart(2,'0')}`}
    const table=document.createElement('table'); table.style.width='100%'; table.style.borderCollapse='collapse';
    table.innerHTML = `<thead><tr><th colspan="7" style="padding:8px 10px;border-bottom:1px solid var(--line);text-align:left">${now.toLocaleString(undefined,{month:'long',year:'numeric'})}</th></tr><tr>
      <th>S</th><th>M</th><th>T</th><th>W</th><th>T</th><th>F</th><th>S</th></tr></thead>`;
    const tbody=document.createElement('tbody');
    let day=1;
    for(let r=0;r<6;r++){ const tr=document.createElement('tr');
      for(let c=0;c<7;c++){ const td=document.createElement('td'); td.style.padding='6px'; td.style.textAlign='center'; td.style.borderTop='1px solid var(--line)';
        if(r===0 && c<start || day>days) td.textContent='';
        else { 
          td.textContent=day; 
          const dateIso = iso(day);
          if(blocked.includes(dateIso) || blockedDatesPublic.includes(dateIso)){
            td.style.background='#1f1f22'; td.style.color='#e5e5e5'; td.title='Blocked';
          } 
          day++; 
        }
        tr.appendChild(td);
      }
      tbody.appendChild(tr);
    }
    table.appendChild(tbody); root.innerHTML=''; root.appendChild(table);
  }

  function renderAll(){ renderChips(); renderMiniCalendar(); }
  renderAll();

  // Block controls
  const addBtn=document.getElementById('addBlock'); const clearBtn=document.getElementById('clearBlocks'); const blockDate=document.getElementById('blockDate');
  if(addBtn) addBtn.onclick=()=>{ const v=blockDate.value; if(!v) return alert('Pick a date to block.'); const list=loadBlocked(); if(!list.includes(v)){ list.push(v); list.sort(); saveBlocked(list); renderAll(); blockDate.value=''; } };
  if(clearBtn) clearBtn.onclick=()=>{ if(confirm('Clear all blocked dates?')){ saveBlocked([]); renderAll(); } };

  // Disable public blocked dates in picker
  const bookingDatePicker = document.getElementById('date');
  if(bookingDatePicker){
    bookingDatePicker.addEventListener('input', function(){
      if(blockedDatesPublic.includes(this.value)){
        alert("This date is unavailable for booking. Please choose another.");
        this.value = "";
      }
    });
    bookingDatePicker.addEventListener('focus', function(){
      this.min = new Date().toISOString().split("T")[0];
    });
  }

  // Auto add pricing line in booking submission
  const PRICES={"Embalming – Standard":200,"Embalming – Autopsy":300,"Embalming – Oversized":350,"Funeral Directing – 2hr + Cemetery":200,"Funeral Directing – Cemetery Only":100,"Cosmetics – Basic":75};
  function priceLine(service){ if(!(service in PRICES)) return ''; return service==="Cosmetics – Basic" ? `Estimated Rate: $${PRICES[service]}+ (starting)` : `Rate: $${PRICES[service]}`; }
  const bookingForm=document.getElementById('bookingForm');
  if(bookingForm) bookingForm.addEventListener('submit',(e)=>{
    const date=document.getElementById('date').value; 
    const blocked=loadBlocked();
    if(blocked.includes(date) || blockedDatesPublic.includes(date)){ 
      e.preventDefault(); alert('That date is blocked. Choose another date.'); return; 
    }
    const svc=document.getElementById('svc').value; document.getElementById('pricing_note').value = priceLine(svc) + " | Payment due 7 days from invoice; $25/day late fee.";
  });
})();
</script>
</body>
</html>
